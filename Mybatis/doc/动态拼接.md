<!-- TOC -->

- [if标签](#if标签)
- [choose(when otherwise)标签](#choosewhen-otherwise标签)
- [trim(where set)标签](#trimwhere-set标签)
- [foreach标签](#foreach标签)
- [bind标签](#bind标签)

<!-- /TOC -->
原生Jddbc中，我们根据不同条件拼接SQL语句时，不仅不能忘了必要的空格还要注意各种逗号和双引号十分麻烦。Mybatis动态拼接可以十分简单的完成之前原生Jdbc的SQL拼接。

Mybatis3之后采用了功能强大的OGNL(Object-Graph Navigation Language)表达式消除了许多其他标签，所以我们只需要学习几种标签就能完成SQL语句的动态拼接。

## if标签
if标签通常用于WHERE语句中，通过判断参数值来决定是否使用某个查询条件，它也经常用于UPDATE语句中判断是否更新某一个字段，还可以在INSERT语句中用来判断是否插入某个字段值

**where子句使用if**
```xml
<!--有id根据id查,有name根据name查询 两个都有则根据两个查-->
    <select id="selByIdName" resultType="student">
        select * from studentinfo where 1=1
        <if test="id != ''">
            and id = #{id}
        </if>
        <if test="name != null and name != ''">
            and name = #{name}
        </if>
    </select>
```
StudentMapper接口：
```java
public interface StudentMapper {
    List<Student> selByIdName(@Param("id") int id, @Param("name") String name);
}
```
测试：
```java
StudentMapper sm = session.getMapper(StudentMapper.class);

//只查id   日志sql语句为select * from studentinfo where 1=1 and id = ?
List<Student> ls = sm.selByIdName(1,"");
System.out.println(ls);

//只查name  日志sql语句为select * from studentinfo where 1=1 and name = ?
List<Student> ls2 = sm.selByIdName(0,"李");  //对于int类型0表示为空
System.out.println(ls2);

//两个都查  日志sql语句为select * from studentinfo where 1=1 and id = ? and name = ?
List<Student> ls3 = sm.selByIdName(1,"赵");
System.out.println(ls3);

//两个都没有 日志sql语句为select * from studentinfo where 1=1
List<Student> ls4 = sm.selByIdName(0,"");
System.out.println(ls4);
```

**update和insert语句中使用if**

对于update和insert中我们只看一下sql语句的写法

```xml
<!--根据id更新数据(注意只更新变化的字段)-->
    <update id="upByIdSelective" >
        update studentinfo set
        <if test="name != null and name != ''">
          name = #{name},
        </if>
        <if test="age != ''">
          age = #{age},
        </if>
        id = #{id}
        where id = #{id}
    </update>

<!--如果传入字段非空则插入，否则使用数据库中的空-->
<!--为了测试，修改了数据库中的student表中的name可以为空-->
<!--下面为如果name为空则只插入age，否则插入name和age-->
    <insert id="insSelective" useGeneratedKeys="true" keyProperty="id">
        insert into studentinfo(
        <if test="name != null and name != ''">
        name,
        </if>
        age)
        values(
        <if test="name != null and name != ''">
            #{name},
        </if>
        #{age}
        )
    </insert>   
```

## choose(when otherwise)标签
上面的<if>标签相当于if语句，可以进行条件筛选，但是无法实现if...else if...else逻辑。如果想要实现这样的逻辑，需要用到choose when otherwise标签。

一个choose中至少一个when,有0个或一个otherwise。

```xml

```
## trim(where set)标签

## foreach标签

## bind标签